<?xml version="1.0" encoding="UTF-8"?>

<launch>
    <!-- START SENSORS -->
    <include file="$(find runs)/launch/subsystems/sensors.launch"/>

    <!-- GPS injector so APM navigation works -->
    <node pkg="gps_injection" type="gps_injection_node" name="gps" output="screen" required="true"/>

    <!-- RECORD ROSBAG -->
    <node pkg="rosbag" type="record" name="data_capture"
       args="$(eval 'record --udp -b 0 --chunksize=4096 -O /media/usb/rosbags/' + raw_input('Enter rec file name: ') + '.bag
          /rosout_agg

          /camera/imu
          /camera/color/image_raw

          /pi_camera/image_raw
          /pi_camera/camera_info

          /ublox/fix
          /ublox/fix_velocity

          /mavros/global_position/compass_hdg
          /mavros/global_position/rel_alt
          /mavros/imu/static_pressure
          /mavros/imu/data
       ')"/>

</launch>
